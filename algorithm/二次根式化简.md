## 二次根式化简

一个不知道输入范围的开方程序

#### 算法

整数部分数组num[]，待开方的数s

1. 判断s是否是1，是的话返回1

2. 对质数数组进行循环

   ① s与质数相等，返回

   ② s可以整除质数的平方，将质数加入num[]，除之后的数作为新的s，回到1

3. 将num中的非零相乘得到整数部分，s作为根号里的部分

#### 实现

Main

```java
package algo;

public class Main {

    public static void main(String[] args) {
        SQRT.getSQRT();
    }
}

```

SQRT

```java
package algo;

import java.util.Scanner;

public class SQRT {
    public static void getSQRT() {
        System.out.print("Radicand = ");
        Scanner scan = new Scanner(System.in);
        int radicand = string2int(scan.next());
        if (radicand == -1) {
            System.out.println("Invalid input!");
        } else if (radicand == 0) {
            System.out.println("Result = 0");
        } else if (radicand == 1) {
            System.out.println("Result = 1");
        } else {
            System.out.println("Result = " + sqrt(radicand));
        }

    }

    private static String sqrt(int radicand) {

        int[] num = new int[50];
        int s = fun(radicand, num, 0);
        int x = 1;
        for (int n : num) {
            if (n == 0)
                break;
            x *= n;
        }
        if (x == 1)
            return "sqrt(" + s + ")";
        return x + " * sqrt(" + s + ")";
    }

    private static int fun(int s, int[] num, int index) {
        int[] prime = {2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47};
        // more: {, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97}
        for (int p : prime) {
            if (s == p) {
                return s;
            } else if (s % (p * p) == 0) {
                s /= (p * p);
                num[index++] = p;
                return fun(s, num, index);
            }
        }
        return s;
    }

    private static int string2int(String str) {
        // 检查输入,转换失败返回-1
        char[] num = str.toCharArray();
        int result = 0;
        int i = 1;
        char c;
        for (int j = num.length - 1; j >= 0; j--) {
            c = num[j];
            if (c < '0' || c > '9') {
                return -1;
            }
            result += i * (c - '0');
            i *= 10;
        }
        return result;
    }
}
```

#### 一些问题

不知道能得出正确结果的范围

没有对特别大的数的输入检查，可能溢出