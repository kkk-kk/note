# 位操作

+ 位操作只能用于整型数据

+ 位操作符：`& | ^ ~ << >>`
  + `<<`左移：各二进位全部左移若干位，高位丢弃，低位补0
  + `>>`右移：各二进位全部右移若干位，对无符号数，高位补0，有符号数，各编译器处理方法不一样，有的补符号位（算术右移），有的补0（逻辑右移）

## 技巧

#### 判断奇偶

```
if (a & 1 == 0)代替if (a % 2 == 0)来判断a是不是偶数
```

#### 交换两数

```c++
void Swap(int &a, int &b)  {  
    if (a != b){  
        a ^= b;  
        b ^= a;  
        a ^= b;  
    }  
} 
```

#### 变换符号

```
 ~a + 1
```

#### 求绝对值

```c++
int my_abs(int a)  {  
    int i = a >> 31;  
    return i == 0 ? a : (~a + 1); // 负数变为正数
    // 对于任何数，与0异或都会保持不变，与-1即0xFFFFFFFF异或就相当于取反。
    // 因此，a与i异或后再减i（因为i为0或-1，所以减i即是要么加0要么加1）也可以得到绝对值。
    return ((a ^ i) - i);  
}  
```

## 其他用法

[C++：位操作基础篇之位操作全面总结](https://www.cnblogs.com/zhoug2020/p/4978822.html)

#### 循环移位

```c++
a = 01111011; // 循环左移2位 -> 11101101
b = a >> 6; // 用来得到正常左移丢失的位和循环移位后其正确位置 b = 00000001
a = a << 2;
a = a|b;

// ****总结****
// N:总长度
(a >> (N - n)) | (a << n) // 循环左移n
(a << (N - n)) | (a >> n) // 循环右移n
```

### 例题

```c++
/*
给出两个不大于65535的非负整数，判断其中一个的16位二进制表示形式，是否能由另一个的16位二进制表示形式经过循环左移若干位而得到
*/
#include <iostream>
using namespace std;

int main() {
	unsigned short a, b,temp,i;
	while (cin >> a >> b) {
		for (i = 0;i < 16;i++) {
			temp = (a >> (16 - i)) & 65535 | (a << i);
			if (temp == b) {
				cout << "YES" << endl;
				break;
			}
		}
		if (i == 16) cout << "NO" << endl;
	}
}
```

